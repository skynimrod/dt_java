<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">




    <meta name="author" content="sl2718281828">
    <meta name="Copyright" content="Csdn">
    <meta name="description" content="给大家介绍一个最新的访问本机代码的Java框架—JNA。&lt;br /&gt;&lt;br /&gt;JNA(Java Native Access)框架是一个开源的Java框架，是SUN公司主导开发的，建立在经典的JNI的基础之上的一个框架。&lt;br /&gt;&lt;br /&gt;JNA项目地址：https://jna.dev.java.net/&lt;br /&gt;&lt;br /&gt; &lt;br /&gt;&lt;br /&gt;非常强大、易用，功能上类似与.NET的P/Invoke。&lt;br /&gt;">
    <meta name="keywords" content="sl2718281828,JNA—JNI终结者">
    <link rel="Shortcut Icon" href="http://profile.csdn.net/sl2718281828/picture/1.ico">
    <link href="JNA%E4%BB%8B%E7%BB%8D_files/Cogitation_1.css" type="text/css" rel="stylesheet" media="all"><script type="text/javascript" src="JNA%E4%BB%8B%E7%BB%8D_files/jquery-1.js"></script><script type="text/javascript" src="JNA%E4%BB%8B%E7%BB%8D_files/jquery.js"></script><script type="text/javascript" src="JNA%E4%BB%8B%E7%BB%8D_files/highlighter.js"></script><link href="http://blog.csdn.net/sl2718281828/rss.aspx" title="RSS" type="application/rss+xml" rel="alternate">
    <title>
        JNA—JNI终结者 - LEO.SUN的专栏 - CSDNBlog</title>
<link type="text/css" rel="stylesheet" href="JNA%E4%BB%8B%E7%BB%8D_files/webimPopup.css"><script src="JNA%E4%BB%8B%E7%BB%8D_files/mystats_more.js" type="text/javascript"></script><script type="text/javascript" src="JNA%E4%BB%8B%E7%BB%8D_files/webimPopup.js"></script></head><body id="defaultuser">
    <div id="csdnblog_allwrap">
        <form name="Form1" method="post" action="3591857.aspx" language="javascript" onsubmit="javascript:return WebForm_OnSubmit();" id="Form1">
<input name="__EVENTTARGET" id="__EVENTTARGET" value="" type="hidden">
<input name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" type="hidden">
<input name="__VIEWSTATE" id="__VIEWSTATE" value="" type="hidden">

<script type="text/javascript">
<!--
var theForm = document.forms['Form1'];
if (!theForm) {
    theForm = document.Form1;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
// -->
</script>


<script src="JNA%E4%BB%8B%E7%BB%8D_files/WebResource.js" type="text/javascript"></script>

<script type="text/javascript">
//<![CDATA[
var Anthem_FormID = "Form1";
//]]>
</script>
<script src="JNA%E4%BB%8B%E7%BB%8D_files/WebResource.axd" type="text/javascript"></script>
<script src="JNA%E4%BB%8B%E7%BB%8D_files/WebResource_002.js" type="text/javascript"></script>
<script type="text/javascript">
<!--
function WebForm_OnSubmit() {
if (typeof(ValidatorOnSubmit) == "function" && ValidatorOnSubmit() == false) return false;
return true;
}
// -->
</script>

        
<div id="csdnblog_midwrap">
    <div id="csdnblog_header">
        
        <h1><a id="Header1_HeaderTitle" href="http://blog.csdn.net/sl2718281828/">LEO.SUN的专栏</a></h1><h2>淡泊以明致，宁静以致远</h2>
        
        <ul id="personalnav"><li><a href="http://hi.csdn.net/dukula" target="_blank">欢迎 dukula</a></li><li><a href="http://hi.csdn.net/my.html">我的首页<em></em></a></li><li><a href="http://writeblog.csdn.net/PostList.aspx">文章管理<em></em></a></li><li><a href="http://writeblog.csdn.net/PostEditPlain.aspx">写文章<em></em></a></li><li><a href="http://writeblog.csdn.net/Signout.aspx">退出</a></li></ul>
        
        <ul id="blogsearchsty"><li><input id="inputSearch" class="bolgsearch" onkeydown="return keyb(event)" type="text"></li><li class="selectsty"><select name="Search:ddlSearchScope" id="Search_ddlSearchScope"><option value="all">全站</option><option value="sl2718281828">当前博客</option></select></li><li><input onclick="checkNull()" value="搜索" class="bolggobtn" type="button"></li></ul>
        
        <ul id="menu"><li><a href="http://hi.csdn.net/sl2718281828">空间</a></li><li><a href="http://blog.csdn.net/sl2718281828" class="on">博客</a></li><li><a href="http://hi.csdn.net/sl2718281828/profile/contactlist/1.html">好友</a></li><li><a href="http://album.hi.csdn.net/" target="_blank">相册</a></li><li><a href="http://hi.csdn.net/sl2718281828/profile/notebook/1.html" class="last">留言</a></li></ul>
    </div>
    <div id="csdnblog_sidebar">
        <div class="gutter">
            <div class="aboutauthor">
                <dl>
                    
                    <dt>用户操作</dt><dd class="middle"><a href="http://webim.csdn.net/Messages/sl2718281828.ashx" target="_blank">[即时聊天]</a> <a href="http://hi.csdn.net/Admin/WriteMessage.aspx?Receiver=sl2718281828" target="_blank">[发私信]</a> <a href="http://webim.csdn.net/AddFriends/sl2718281828.ashx" target="_blank">[加为好友]</a></dd><dt>sl2718281828</dt><dd class="middle"><img src="JNA%E4%BB%8B%E7%BB%8D_files/1.jpg"></dd>
                    
                    

                    <dt>最近评论</dt>
                    
                    <dt>文章分类</dt><dd><div class="publiclist_sidebar"><ul><li><a href="http://blog.csdn.net/sl2718281828/category/415152.aspx">apache</a><a href="http://blog.csdn.net/sl2718281828/category/415152.aspx/rss">(RSS)</a></li><li><a href="http://blog.csdn.net/sl2718281828/category/415154.aspx">hibernate技术</a><a href="http://blog.csdn.net/sl2718281828/category/415154.aspx/rss">(RSS)</a></li><li><a href="http://blog.csdn.net/sl2718281828/category/457296.aspx">IDE</a><a href="http://blog.csdn.net/sl2718281828/category/457296.aspx/rss">(RSS)</a></li><li><a href="http://blog.csdn.net/sl2718281828/category/414683.aspx">java</a><a href="http://blog.csdn.net/sl2718281828/category/414683.aspx/rss">(RSS)</a></li><li><a href="http://blog.csdn.net/sl2718281828/category/414665.aspx">spring技术</a><a href="http://blog.csdn.net/sl2718281828/category/414665.aspx/rss">(RSS)</a></li><li><a href="http://blog.csdn.net/sl2718281828/category/414664.aspx">struts技术</a><a href="http://blog.csdn.net/sl2718281828/category/414664.aspx/rss">(RSS)</a></li><li><a href="http://blog.csdn.net/sl2718281828/category/414662.aspx">web技术</a><a href="http://blog.csdn.net/sl2718281828/category/414662.aspx/rss">(RSS)</a></li><li><a href="http://blog.csdn.net/sl2718281828/category/414668.aspx">调试</a><a href="http://blog.csdn.net/sl2718281828/category/414668.aspx/rss">(RSS)</a></li></ul></div></dd><dt>收藏</dt><dd><div class="publiclist_sidebar"><ul></ul></div></dd><dt>相册</dt><dt>存档</dt><dd><div class="publiclist_sidebar"><ul><li><a href="http://blog.csdn.net/sl2718281828/archive/2008/12.aspx">2008年12月(1)</a></li><li><a href="http://blog.csdn.net/sl2718281828/archive/2008/09.aspx">2008年09月(1)</a></li><li><a href="http://blog.csdn.net/sl2718281828/archive/2008/06.aspx">2008年06月(2)</a></li><li><a href="http://blog.csdn.net/sl2718281828/archive/2007/06.aspx">2007年06月(1)</a></li></ul></div></dd>

                    <span id="RecentVisitors"></span>
                    
                    <dt>软件项目交易</dt><dd><iframe style="margin: 0pt; width: 180px; height: 32px;" src="JNA%E4%BB%8B%E7%BB%8D_files/CsdnBlogPage.htm" scrolling="no" frameborder="0"></iframe></dd>
                    
                    <span id="SubscriptionList"><dt>订阅我的博客</dt><dd><a href="http://blog.csdn.net/sl2718281828/Rss.aspx"><img alt="XML聚合" src="JNA%E4%BB%8B%E7%BB%8D_files/xml.gif" border="0"></a>&nbsp;&nbsp;<a href="http://feeds.feedsky.com/csdn.net/sl2718281828" target="_blank"><img alt="FeedSky" src="JNA%E4%BB%8B%E7%BB%8D_files/feedsky.gif" border="0"></a></dd><dd><a href="http://www.xianguo.com/subscribe.php?url=http://blog.csdn.net/sl2718281828/Rss.aspx" target="_blank"><img alt="订阅到鲜果" src="JNA%E4%BB%8B%E7%BB%8D_files/rss_xianguo.jpg" border="0"></a></dd><dd><a href="http://fusion.google.com/add?feedurl=http://blog.csdn.net/sl2718281828/Rss.aspx" target="_blank"><img alt="订阅到Google" src="JNA%E4%BB%8B%E7%BB%8D_files/rss_google.gif" border="0"></a></dd><dd><a href="http://www.zhuaxia.com/add_channel.php?url=http://blog.csdn.net/sl2718281828/Rss.aspx" target="_blank"><img alt="订阅到抓虾" src="JNA%E4%BB%8B%E7%BB%8D_files/rss_zhuaxia.gif" border="0"></a></dd><dd><a href="http://www.bloglines.com/sub/http://blog.csdn.net/sl2718281828/Rss.aspx" target="_blank"><img alt="订阅到BlogLines" src="JNA%E4%BB%8B%E7%BB%8D_files/rss_bloglines.gif" border="0"></a></dd><dd><a href="http://add.my.yahoo.com/rss?url=http://blog.csdn.net/sl2718281828/Rss.aspx" target="_blank"><img alt="订阅到Yahoo" src="JNA%E4%BB%8B%E7%BB%8D_files/rss_yahoo.gif" border="0"></a></dd><dd><a href="http://rss.gougou.com/find_rss.jsp?url=http://blog.csdn.net/sl2718281828/Rss.aspx" target="_blank"><img alt="订阅到GouGou" src="JNA%E4%BB%8B%E7%BB%8D_files/rss_gougou.gif" border="0"></a></dd><dd><a href="http://www.pageflakes.com/subscribe.aspx?url=http://blog.csdn.net/sl2718281828/Rss.aspx" target="_blank"><img alt="订阅到飞鸽" src="JNA%E4%BB%8B%E7%BB%8D_files/rss_pageflakes.gif" border="0"></a></dd><dd><a href="http://www.rojo.com/add-subscription?resource=http://blog.csdn.net/sl2718281828/Rss.aspx" target="_blank"><img alt="订阅到Rojo" src="JNA%E4%BB%8B%E7%BB%8D_files/rss_rojo.gif" border="0"></a></dd><dd><a href="http://www.newsgator.com/ngs/subscriber/subfext.aspx?url=http://blog.csdn.net/sl2718281828/Rss.aspx" target="_blank"><img alt="订阅到newsgator" src="JNA%E4%BB%8B%E7%BB%8D_files/rss_newsgator.gif" border="0"></a></dd><dd><a href="http://www.netvibes.com/subscribe.php?url=http://blog.csdn.net/sl2718281828/Rss.aspx" target="_blank"><img alt="订阅到netvibes" src="JNA%E4%BB%8B%E7%BB%8D_files/rss_netvibes.gif" border="0"></a></dd></span>
                </dl>
            </div>
        </div>
    </div>
    
    <div id="csdnblog_content">
        <div class="gutter">
            <script type="text/javascript" src="JNA%E4%BB%8B%E7%BB%8D_files/PrintNotice.js"></script><div class="default_contents"><h3><span><a href="http://forum.csdn.net/SList/blogSupport">[意见反馈]</a><a href="http://blog.csdn.net/blogdevteam">[官方博客]</a></span>系统公告：<a href="http://g.csdn.net/5081013">2009年2月23日，博客升级公告！</a></h3></div>
            
                    
<div class="default_contents">
    <div class="user_article">
        <script type="text/javascript" src="JNA%E4%BB%8B%E7%BB%8D_files/LoadFeedbackCount.js"></script>
        <h1><img src="JNA%E4%BB%8B%E7%BB%8D_files/turnship.gif" alt="转载" width="15" border="0" height="14">&nbsp;<a href="http://blog.csdn.net/sl2718281828/archive/2008/12/23/3591857.aspx">JNA—JNI终结者</a><cite class="fav_csdnstylebykimi"><a href="javascript:d=document;t=d.selection?(d.selection.type!='None'?d.selection.createRange().text:''):(d.getSelection?d.getSelection():'');void(saveit=window.open('http://wz.csdn.net/storeit.aspx?t='+escape(d.title)+'&amp;u='+escape(d.location.href)+'&amp;c='+escape(t),'saveit','scrollbars=no,width=590,height=300,left=75,top=20,status=no,resizable=yes'));saveit.focus();" class="fav_csdnstylebykimi" title="收藏到我的网摘中，并分享给我的朋友">收藏</a></cite></h1>
<div class="blogstory">
    <script>function StorePage(){d=document;t=d.selection?(d.selection.type!='None'?d.selection.createRange().text:''):(d.getSelection?d.getSelection():'');void(keyit=window.open('http://www.365key.com/storeit.aspx?t='+escape(d.title)+'&u='+escape(d.location.href)+'&c='+escape(t),'keyit','scrollbars=no,width=475,height=575,left=75,top=20,status=no,resizable=yes'));keyit.focus();}</script>&nbsp; 
<h1 style="margin: 24pt 0cm 0pt;"><font size="5"><font color="#365f91"><span style="font-family: 宋体;">介绍</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></h1>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 22pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">给大家介绍一个最新的访问本机代码的</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">框架</span><span style="" lang="EN-US"><font face="Calibri">—JNA</font></span><span style="font-family: 宋体;">。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 22pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">JNA(Java Native Access)</font></span><span style="font-family: 宋体;">框架是一个开源的</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">框架，是</span><span style="" lang="EN-US"><font face="Calibri">SUN</font></span><span style="font-family: 宋体;">公司主导开发的，建立在经典的</span><span style="" lang="EN-US"><font face="Calibri">JNI</font></span><span style="font-family: 宋体;">的基础之上的一个框架。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 22pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">项目地址：</span></font><span style="" lang="EN-US"><a href="https://jna.dev.java.net/"><u><font color="#800080" face="Calibri">https://jna.dev.java.net/</font></u></a><o:p></o:p></span></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 22pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">非常强大、易用，功能上类似与</span><span style="" lang="EN-US"><font face="Calibri">.NET</font></span><span style="font-family: 宋体;">的</span><span style="" lang="EN-US"><font face="Calibri">P/Invoke</font></span><span style="font-family: 宋体;">。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<h1 style="margin: 24pt 0cm 0pt;"><font size="5"><font color="#365f91"><span style="font-family: 宋体;">不堪回首的</span><span style="" lang="EN-US"><font face="Cambria">JNI<o:p></o:p></font></span></font></font></h1>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 22pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">我们知道，使用</span><span style="" lang="EN-US"><font face="Calibri">JNI</font></span><span style="font-family: 宋体;">调用</span><span style="" lang="EN-US"><font face="Calibri">.dll/.so</font></span><span style="font-family: 宋体;">共享类库是非常非常麻烦和痛苦的。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">如果有一个现有的</span><span style="" lang="EN-US"><font face="Calibri">.dll/.so</font></span><span style="font-family: 宋体;">文件，如果使用</span><span style="" lang="EN-US"><font face="Calibri">JNI</font></span><span style="font-family: 宋体;">技术调用，我们首先需要另外使用</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">语言写一个</span><span style="" lang="EN-US"><font face="Calibri">.dll/.so</font></span><span style="font-family: 宋体;">共享库，使用</span><span style="" lang="EN-US"><font face="Calibri">SUN</font></span><span style="font-family: 宋体;">规定的数据结构替代</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">语言的数据结构，调用已有的</span><span style="" lang="EN-US"><font face="Calibri"><span style="">&nbsp; </span>dll/so</font></span><span style="font-family: 宋体;">中公布的函数。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 22pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">然后再在</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">中载入这个适配器</span><span style="" lang="EN-US"><font face="Calibri">dll/so</font></span><span style="font-family: 宋体;">，再编写</span><span style="" lang="EN-US"><font face="Calibri">Java<span style="">&nbsp;&nbsp; </span>native</font></span><span style="font-family: 宋体;">函数作为</span><span style="" lang="EN-US"><font face="Calibri">dll</font></span><span style="font-family: 宋体;">中函数的代理。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 22pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">经过</span><span style="" lang="EN-US"><font face="Calibri">2</font></span><span style="font-family: 宋体;">个繁琐的步骤才能在</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">中调用本地代码。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 22pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">因此，很少有</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">程序员愿意编写调用</span><span style="" lang="EN-US"><font face="Calibri">dll/.so</font></span><span style="font-family: 宋体;">库中的原生函数的</span><span style="" lang="EN-US"><font face="Calibri">java</font></span><span style="font-family: 宋体;">程序。这也使</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">语言在客户端上乏善可陈。可以说</span><span style="" lang="EN-US"><font face="Calibri">JNI</font></span><span style="font-family: 宋体;">是</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">的一大弱点！</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<h1 style="margin: 24pt 0cm 0pt;"><font size="5"><font color="#365f91"><span style="" lang="EN-US"><font face="Cambria">.NET</font></span><span style="font-family: 宋体;">平台上强大的</span><span style="" lang="EN-US"><font face="Cambria">P/Invoke<o:p></o:p></font></span></font></font></h1>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">而在</span><span style="" lang="EN-US"><font face="Calibri">.NET</font></span><span style="font-family: 宋体;">平台上，强大的</span><span style="" lang="EN-US"><font face="Calibri">P/Invoke</font></span><span style="font-family: 宋体;">技术使我们</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">程序员非常羡慕。使用</span><span style="" lang="EN-US"><font face="Calibri">P/Invoke</font></span><span style="font-family: 宋体;">技术，只需要使用编写一个</span><span style="" lang="EN-US"><font face="Calibri">.NET</font></span><span style="font-family: 宋体;">函数，再加上一个声明的标注，就可以直接调用</span><span style="" lang="EN-US"><font face="Calibri">dll</font></span><span style="font-family: 宋体;">中的函数。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">不需要你再使用</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">语言编写</span><span style="" lang="EN-US"><font face="Calibri">dll</font></span><span style="font-family: 宋体;">来适配。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<h1 style="margin: 24pt 0cm 0pt;"><font size="5"><font color="#365f91"><span style="font-family: 宋体;">不逊于</span><span style="" lang="EN-US"><font face="Cambria">P/Invoke</font></span><span style="font-family: 宋体;">的</span><span style="" lang="EN-US"><font face="Cambria">JNA<o:p></o:p></font></span></font></font></h1>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">现在，不需要再羡慕</span><span style="" lang="EN-US"><font face="Calibri">.NET</font></span><span style="font-family: 宋体;">的</span><span style="" lang="EN-US"><font face="Calibri">P/Invoke</font></span><span style="font-family: 宋体;">机制了。</span><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">把对</span><span style="" lang="EN-US"><font face="Calibri">dll/.so</font></span><span style="font-family: 宋体;">共享库的调用减少到了和</span><span style="" lang="EN-US"><font face="Calibri">P/Invoke</font></span><span style="font-family: 宋体;">相同的程度。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">使用</span><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">，不需要再编写适配用的</span><span style="" lang="EN-US"><font face="Calibri">.dll/.so</font></span><span style="font-family: 宋体;">，只需要在</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">中编写一个接口和一些代码，作为</span><span style="" lang="EN-US"><font face="Calibri">.dll/.so</font></span><span style="font-family: 宋体;">的代理，就可以在</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">程序中调用</span><span style="" lang="EN-US"><font face="Calibri">dll/so</font></span><span style="font-family: 宋体;">。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<h2 style="margin: 10pt 0cm 0pt;"><font size="4"><font color="#4f81bd"><span style="" lang="EN-US"><font face="Cambria">JNA</font></span><span style="font-family: 宋体;">快速启动</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></h2>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><span style=""><font face="Calibri">&nbsp;&nbsp;&nbsp;&nbsp; </font></span></span><span style="font-family: 宋体;">现在让我们直接进入</span><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">的世界。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 22pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">你只需要下载一个</span><span style="" lang="EN-US"><font face="Calibri">jar</font></span><span style="font-family: 宋体;">包，就可以使用</span><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">的强大功能方便地调用动态链接库中的</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">函数。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">1</font></span><span style="font-family: 宋体;">，下载</span><span style="" lang="EN-US"><font face="Calibri">jna.jar</font></span><span style="font-family: 宋体;">。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><span style="font-family: 宋体;"><font color="#000000">在这里</font></span><span style="" lang="EN-US"><a href="https://jna.dev.java.net/servlets/ProjectDocumentList?folderID=7408&amp;expandFolder=7408&amp;folderID=0"><u><font color="#800080" face="Calibri">https://jna.dev.java.net/servlets/ProjectDocumentList?folderID=7408&amp;expandFolder=7408&amp;folderID=0</font></u></a><o:p></o:p></span></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">2</font></span><span style="font-family: 宋体;">，现在你已经可以使用</span><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">了。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">为了方便你参考</span><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">的</span><span style="" lang="EN-US"><font face="Calibri">java</font></span><span style="font-family: 宋体;">类库，我制作了《</span><span style="" lang="EN-US"><font face="Calibri">JNA3.09API</font></span><span style="font-family: 宋体;">参考手册》，是</span><span style="" lang="EN-US"><font face="Calibri">CHM</font></span><span style="font-family: 宋体;">格式的。你可以到这里下载</span></font><span style=""><font face="Calibri"><font color="#000000"> </font><span lang="EN-US"><a href="http://download.csdn.net/source/900438"><u><font color="#800080">http://download.csdn.net/source/900438</font></u></a><o:p></o:p></span></font></span></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<h3 style="margin: 10pt 0cm 0pt;"><font size="3"><font color="#4f81bd"><span style="" lang="EN-US"><font face="Cambria">JNA</font></span><span style="font-family: 宋体;">例子</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></h3>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<h4 style="margin: 10pt 0cm 0pt;"><em><font color="#4f81bd"><span style="font-family: 宋体;">例子</span><span style="" lang="EN-US"><font face="Cambria">1<span style="">&nbsp;&nbsp;&nbsp; </span><o:p></o:p></font></span></font></em></h4>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">现在让我们运行一个</span><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">程序，感受它的强大威力。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">1</font></span><span style="font-family: 宋体;">，在</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">项目中引入</span><span style="" lang="EN-US"><font face="Calibri">jna.jar</font></span><span style="font-family: 宋体;">包。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">2</font></span><span style="font-family: 宋体;">，创建一个类：</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri">import com.sun.jna.Library;<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri">import com.sun.jna.Native;<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri">import com.sun.jna.Platform;<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri">/** Simple example of native library declaration and usage. */<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri">public class HelloWorld {<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp; </span>public interface CLibrary extends Library {<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>CLibrary INSTANCE = (CLibrary)<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Native.loadLibrary((Platform.isWindows() ? "msvcrt" : "c"),<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>CLibrary.class);<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp; </span><o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>void printf(String format, Object... args);<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp; </span>public static void main(String[] args) {<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>CLibrary.INSTANCE.printf("Hello, World\n");<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>for (int i=0;i &lt; args.length;i++) {<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>CLibrary.INSTANCE.printf("Argument %d: %s\n", i, args[i]);<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri">}<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">3</font></span><span style="font-family: 宋体;">，执行，可以看到控制台中打印出了</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri">Hello, World<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><span style=""><font face="Calibri">&nbsp;&nbsp;&nbsp; </font></span></span><span style="font-family: 宋体;">但是，请注意，这个程序实际上是使用</span><span style="" lang="EN-US"><font face="Calibri">msvcrt.dll</font></span><span style="font-family: 宋体;">这个</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">运行时库中的</span><span style="" lang="EN-US"><font face="Calibri">printf</font></span><span style="font-family: 宋体;">函数打印出上面这些字符的。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><span style=""><font face="Calibri">&nbsp;&nbsp;&nbsp; </font></span></span><span style="font-family: 宋体;">看，多简单，不需要写一行</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">代码，就可以直接在</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">中调用外部动态链接库中的函数！</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<h4 style="margin: 10pt 0cm 0pt;"><em><font color="#4f81bd"><span style="font-family: 宋体;">例子</span><span style="" lang="EN-US"><font face="Cambria">2<span style="">&nbsp;&nbsp;&nbsp; </span><o:p></o:p></font></span></font></em></h4>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><span style=""><font face="Calibri">&nbsp;&nbsp;&nbsp; </font></span></span><span style="font-family: 宋体;">上面那个例子使用了操作系统自带的动态链接库，现在我们再自己写一个动态链接库试试。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">1</font></span><span style="font-family: 宋体;">，在</span><span style="" lang="EN-US"><font face="Calibri">VS</font></span><span style="font-family: 宋体;">中选择</span><span style="" lang="EN-US"><font face="Calibri">C++</font></span><span style="font-family: 宋体;">语言，然后选择创建一个</span><span style="" lang="EN-US"><font face="Calibri">Win32</font></span><span style="font-family: 宋体;">程序。</span><span style=""><font face="Calibri"> </font></span><span style="font-family: 宋体;">选择</span><span style="" lang="EN-US"><font face="Calibri">dll</font></span><span style="font-family: 宋体;">类型。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">2</font></span><span style="font-family: 宋体;">，发布的</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">函数是：</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal;"><span style="font-size: 9pt; font-family: 新宋体;" lang="EN-US"><o:p><font color="#000000">&nbsp;</font></o:p></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal;"><span style="font-size: 9pt; color: blue; font-family: 新宋体;" lang="EN-US">#define</span><span style="font-size: 9pt; font-family: 新宋体;" lang="EN-US"><font color="#000000"> MYLIBAPI<span style="">&nbsp; </span></font><span style="color: blue;">extern</span><span style=""><font color="#000000">&nbsp;&nbsp; </font></span><span style="color: rgb(163, 21, 21);">"C"</span><span style=""><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp; </font></span><span style="color: blue;">__declspec</span><font color="#000000">( </font><span style="color: blue;">dllexport</span><font color="#000000"> )<span style="">&nbsp; </span><o:p></o:p></font></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal;"><span style="font-size: 9pt; font-family: 新宋体;" lang="EN-US"><o:p><font color="#000000">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="font-size: 9pt; font-family: 新宋体;" lang="EN-US"><font color="#000000">MYLIBAPI </font><span style="color: blue;">void</span><font color="#000000"> say(</font><span style="color: blue;">wchar_t</span><font color="#000000">* pValue);</font></span><span style="font-size: 9pt; font-family: 新宋体;" lang="EN-US"><o:p></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="font-size: 9pt; font-family: 新宋体;" lang="EN-US"><o:p><font color="#000000">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">这个函数的实现是：</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal;"><span style="font-size: 9pt; color: blue; font-family: 新宋体;" lang="EN-US">void</span><span style="font-size: 9pt; font-family: 新宋体;" lang="EN-US"><font color="#000000"><span style="">&nbsp; </span>say(</font><span style="color: blue;">wchar_t</span><font color="#000000">* pValue){<o:p></o:p></font></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal;"><span style="font-size: 9pt; font-family: 新宋体;" lang="EN-US"><font color="#000000"><span style="">&nbsp;&nbsp;&nbsp;&nbsp; </span>std::wcout.imbue(std::locale(</font><span style="color: rgb(163, 21, 21);">"chs"</span><font color="#000000">));<o:p></o:p></font></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal;"><span style="font-size: 9pt; font-family: 新宋体;" lang="EN-US"><o:p><font color="#000000">&nbsp;</font></o:p></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal;"><span style="font-size: 9pt; font-family: 新宋体;" lang="EN-US"><font color="#000000"><span style="">&nbsp;&nbsp;&nbsp;&nbsp; </span>std::wcout&lt;&lt;L</font><span style="color: rgb(163, 21, 21);">"上帝说："</span><font color="#000000">&lt;&lt;pValue&lt;&lt;std::endl;<o:p></o:p></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font color="#000000"><span style="font-size: 9pt; font-family: 新宋体;" lang="EN-US">}</span><span style="" lang="EN-US"><o:p></o:p></span></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">它需要传入一个</span><span style="" lang="EN-US"><font face="Calibri">Unicode</font></span><span style="font-family: 宋体;">编码的字符数组。然后在控制台上打印出一段中文字符。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">3</font></span><span style="font-family: 宋体;">，生成</span><span style="" lang="EN-US"><font face="Calibri">dll</font></span><span style="font-family: 宋体;">。然后把生成的</span><span style="" lang="EN-US"><font face="Calibri">dll</font></span><span style="font-family: 宋体;">文件复制到</span><span style="" lang="EN-US"><font face="Calibri">Eclipse</font></span><span style="font-family: 宋体;">项目中，放在项目下面。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">4</font></span><span style="font-family: 宋体;">，在</span><span style="" lang="EN-US"><font face="Calibri">Eclipse</font></span><span style="font-family: 宋体;">中编写以下代码：</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri">import com.sun.jna.Library;<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri">import com.sun.jna.Native;<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri">import com.sun.jna.WString;<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri">/**<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri"><span style="">&nbsp;</span>* @author </font></span><span style="font-family: 宋体;">沈东良</span><span style="" lang="EN-US"><font face="Calibri"> Edward Shen shendl_s@hotmail.com<o:p></o:p></font></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri"><span style="">&nbsp;</span>* 2008-11-23 </font></span><span style="font-family: 宋体;">下午</span><span style="" lang="EN-US"><font face="Calibri">05:07:14<o:p></o:p></font></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;</span>*TestDll1.dll<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;</span>*/<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri">public class TestDll1Service {<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>public interface TestDll1 extends Library { <o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/**<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">&nbsp;</span>* </font></span><span style="font-family: 宋体;">当前路径是在项目下，而不是</span><span style="" lang="EN-US"><font face="Calibri">bin</font></span><span style="font-family: 宋体;">输出目录下。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">&nbsp;</span>*/<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>TestDll1 INSTANCE = (TestDll1)Native.loadLibrary("TestDll1", TestDll1.class);<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>public void say(WString value);<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/**<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">&nbsp;</span>* <o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">&nbsp;</span>*/<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>public TestDll1Service() {<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>// TODO Auto-generated constructor stub<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/**<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">&nbsp;</span>* @param args<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">&nbsp;</span>*/<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>public static void main(String[] args) {<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>// TODO Auto-generated method stub<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>TestDll1.INSTANCE.say(new WString("Hello World!"));<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>System.out.println("HHEEH</font></span><span style="font-family: 宋体;">我我们无法万恶</span><span style="" lang="EN-US"><font face="Calibri">");<o:p></o:p></font></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri">}<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">5</font></span><span style="font-family: 宋体;">，执行这个</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">类。可以看到控制台下如下输出：</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal;"><span style="font-size: 10pt; color: black; font-family: 宋体;" lang="EN-US">上帝说：</span><span style="font-size: 10pt; color: black; font-family: 'Courier New';" lang="EN-US">Hello World!</span><span style="font-size: 10pt; font-family: 'Courier New';" lang="EN-US"><o:p></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="font-size: 10pt; color: black; font-family: 'Courier New';" lang="EN-US">HHEEH</span><span style="font-size: 10pt; color: black; font-family: 宋体;">我我们无法万恶</span><span style="" lang="EN-US"><o:p></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">6</font></span><span style="font-family: 宋体;">，上面一行是</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">语言使用</span><span style="" lang="EN-US"><font face="Calibri">C++</font></span><span style="font-family: 宋体;">的</span><span style="" lang="EN-US"><font face="Calibri">std::wcout</font></span><span style="font-family: 宋体;">输出的。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">下面一行是</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">语言输出的。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<h1 style="margin: 24pt 0cm 0pt;"><font size="5"><font color="#365f91"><span style="" lang="EN-US"><font face="Cambria">JNA</font></span><span style="font-family: 宋体;">技术解密</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></h1>
<h2 style="margin: 10pt 0cm 0pt;"><font size="4"><font color="#4f81bd"><span style="" lang="EN-US"><font face="Cambria">JNA</font></span><span style="font-family: 宋体;">工作原理</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></h2>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">是建立在</span><span style="" lang="EN-US"><font face="Calibri">JNI</font></span><span style="font-family: 宋体;">技术基础之上的一个</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">类库，它使您可以方便地使用</span><span style="" lang="EN-US"><font face="Calibri">java</font></span><span style="font-family: 宋体;">直接访问动态链接库中的函数。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">原来使用</span><span style="" lang="EN-US"><font face="Calibri">JNI</font></span><span style="font-family: 宋体;">，你必须手工用</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">写一个动态链接库，在</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">语言中映射</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">的数据类型。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">中，它提供了一个动态的</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">语言编写的转发器，可以自动实现</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">和</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">的数据类型映射。你不再需要编写</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">动态链接库。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">当然，这也意味着，使用</span><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">技术比使用</span><span style="" lang="EN-US"><font face="Calibri">JNI</font></span><span style="font-family: 宋体;">技术调用动态链接库会有些微的性能损失。可能速度会降低几倍。但影响不大。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<h2 style="margin: 10pt 0cm 0pt;"><font size="4"><font color="#4f81bd"><span style="" lang="EN-US"><font face="Cambria">JNA</font></span><span style="font-family: 宋体;">技术难点</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></h2>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">1</font></span><span style="font-family: 宋体;">，当前路径是在项目下，而不是</span><span style="" lang="EN-US"><font face="Calibri">bin</font></span><span style="font-family: 宋体;">输出目录下。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">2</font></span><span style="font-family: 宋体;">，数据结构的对应关系：</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<h4 style="margin: 10pt 0cm 0pt;"><em><font color="#4f81bd"><span style="" lang="EN-US"><font face="Cambria">Java—C</font></span><span style="font-family: 宋体;">和操作系统数据类型的对应表</span><span style="" lang="EN-US"><o:p></o:p></span></font></em></h4>
<div align="center">
<table class="MsoNormalTable" style="border: 1pt outset white; width: 100%;" width="100%" border="1" cellpadding="0">
<tbody>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><b><span lang="EN-US">Java Type</span></b><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><b><span lang="EN-US">C Type</span></b><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><b><span lang="EN-US">Native Representation</span></b><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">boolean</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">int</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">32-bit integer (customizable)</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">byte</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">char</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">8-bit integer</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">char</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">wchar_t</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">platform-dependent</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">short</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">short</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">16-bit integer</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">int</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">int</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">32-bit integer</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">long</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">long long, __int64</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">64-bit integer</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">float</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">float</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">32-bit floating point</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">double</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">double</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">64-bit floating point</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span lang="EN-US"><a title="class or interface in java.nio" href="http://java.sun.com/j2se/1.4.2/docs/api/java/nio/Buffer.html"><code><span style="font-size: 12pt; color: blue; line-height: 115%;"><u><font face="宋体">Buffer</font></u></span></code></a><br><a title="class in com.sun.jna" href="mk:@MSITStore:D:%5C0%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86%5C9JNA%5C_API%E5%8F%82%E8%80%83%5CJNA3.09API%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C%E3%80%90%E8%89%AF%E5%B0%91%E3%80%91.chm::/com/sun/jna/Pointer.html"><code><span style="font-size: 12pt; color: blue; line-height: 115%;"><u><font face="宋体">Pointer</font></u></span></code></a><font size="3" color="#000000" face="Calibri"> </font></span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">pointer</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">platform-dependent (32- or 64-bit pointer to memory)</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">&lt;T&gt;[] (array of primitive type)</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">pointer<br>array</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">32- or 64-bit pointer to memory (argument/return)<br>contiguous memory (struct member)</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;" colspan="3">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">除了上面的类型，</span><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">还支持常见的数据类型的映射。</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span lang="EN-US"><a title="class or interface in java.lang" href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/String.html"><code><span style="font-size: 12pt; color: blue; line-height: 115%;"><u><font face="宋体">String</font></u></span></code></a></span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">char*</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><span lang="EN-US"><font face="Calibri">NUL-terminated array (native encoding or </font></span><code><span style="font-size: 12pt; line-height: 115%;" lang="EN-US"><font face="宋体">jna.encoding</font></span></code><font face="Calibri"><span lang="EN-US">)</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span lang="EN-US"><a title="class in com.sun.jna" href="mk:@MSITStore:D:%5C0%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86%5C9JNA%5C_API%E5%8F%82%E8%80%83%5CJNA3.09API%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C%E3%80%90%E8%89%AF%E5%B0%91%E3%80%91.chm::/com/sun/jna/WString.html"><code><span style="font-size: 12pt; color: blue; line-height: 115%;"><u><font face="宋体">WString</font></u></span></code></a></span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">wchar_t*</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">NUL-terminated array (unicode)</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span lang="EN-US"><a title="class or interface in java.lang" href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/String.html"><code><span style="font-size: 12pt; color: blue; line-height: 115%;"><u><font face="宋体">String[]</font></u></span></code></a></span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">char**</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">NULL-terminated array of C strings</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span lang="EN-US"><a title="class in com.sun.jna" href="mk:@MSITStore:D:%5C0%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86%5C9JNA%5C_API%E5%8F%82%E8%80%83%5CJNA3.09API%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C%E3%80%90%E8%89%AF%E5%B0%91%E3%80%91.chm::/com/sun/jna/WString.html"><code><span style="font-size: 12pt; color: blue; line-height: 115%;"><u><font face="宋体">WString[]</font></u></span></code></a></span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">wchar_t**</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">NULL-terminated array of wide C strings</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span lang="EN-US"><a title="class in com.sun.jna" href="mk:@MSITStore:D:%5C0%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86%5C9JNA%5C_API%E5%8F%82%E8%80%83%5CJNA3.09API%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C%E3%80%90%E8%89%AF%E5%B0%91%E3%80%91.chm::/com/sun/jna/Structure.html"><code><span style="font-size: 12pt; color: blue; line-height: 115%;"><u><font face="宋体">Structure</font></u></span></code></a></span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">struct*<br>struct</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span lang="EN-US"><font size="3" color="#000000" face="Calibri">pointer to struct (argument or return) (</font><a title="interface in com.sun.jna" href="mk:@MSITStore:D:%5C0%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86%5C9JNA%5C_API%E5%8F%82%E8%80%83%5CJNA3.09API%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C%E3%80%90%E8%89%AF%E5%B0%91%E3%80%91.chm::/com/sun/jna/Structure.ByReference.html"><code><span style="font-size: 12pt; color: blue; line-height: 115%;"><u><font face="宋体">or explicitly</font></u></span></code></a><font size="3" color="#000000" face="Calibri">)<br>struct by value (member of struct) (</font><a title="interface in com.sun.jna" href="mk:@MSITStore:D:%5C0%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86%5C9JNA%5C_API%E5%8F%82%E8%80%83%5CJNA3.09API%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C%E3%80%90%E8%89%AF%E5%B0%91%E3%80%91.chm::/com/sun/jna/Structure.ByValue.html"><code><span style="font-size: 12pt; color: blue; line-height: 115%;"><u><font face="宋体">or explicitly</font></u></span></code></a><font size="3" color="#000000" face="Calibri">)</font></span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span lang="EN-US"><a title="class in com.sun.jna" href="mk:@MSITStore:D:%5C0%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86%5C9JNA%5C_API%E5%8F%82%E8%80%83%5CJNA3.09API%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C%E3%80%90%E8%89%AF%E5%B0%91%E3%80%91.chm::/com/sun/jna/Union.html"><code><span style="font-size: 12pt; color: blue; line-height: 115%;"><u><font face="宋体">Union</font></u></span></code></a></span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">union</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font color="#000000"><font size="3"><span lang="EN-US"><font face="Calibri">same as </font></span><code><span style="font-size: 12pt; line-height: 115%;" lang="EN-US"><font face="宋体">Structure</font></span></code></font><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span lang="EN-US"><a title="class in com.sun.jna" href="mk:@MSITStore:D:%5C0%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86%5C9JNA%5C_API%E5%8F%82%E8%80%83%5CJNA3.09API%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C%E3%80%90%E8%89%AF%E5%B0%91%E3%80%91.chm::/com/sun/jna/Structure.html"><code><span style="font-size: 12pt; color: blue; line-height: 115%;"><u><font face="宋体">Structure[]</font></u></span></code></a></span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">struct[]</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">array of structs, contiguous in memory</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span lang="EN-US"><a title="interface in com.sun.jna" href="mk:@MSITStore:D:%5C0%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86%5C9JNA%5C_API%E5%8F%82%E8%80%83%5CJNA3.09API%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C%E3%80%90%E8%89%AF%E5%B0%91%E3%80%91.chm::/com/sun/jna/Callback.html"><code><span style="font-size: 12pt; color: blue; line-height: 115%;"><u><font face="宋体">Callback</font></u></span></code></a></span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">&lt;T&gt; (*fp)()</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">function pointer (Java or native)</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span lang="EN-US"><a title="interface in com.sun.jna" href="mk:@MSITStore:D:%5C0%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86%5C9JNA%5C_API%E5%8F%82%E8%80%83%5CJNA3.09API%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C%E3%80%90%E8%89%AF%E5%B0%91%E3%80%91.chm::/com/sun/jna/NativeMapped.html"><code><span style="font-size: 12pt; color: blue; line-height: 115%;"><u><font face="宋体">NativeMapped</font></u></span></code></a></span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">varies</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">depends on definition</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span lang="EN-US"><a title="class in com.sun.jna" href="mk:@MSITStore:D:%5C0%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86%5C9JNA%5C_API%E5%8F%82%E8%80%83%5CJNA3.09API%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C%E3%80%90%E8%89%AF%E5%B0%91%E3%80%91.chm::/com/sun/jna/NativeLong.html"><code><span style="font-size: 12pt; color: blue; line-height: 115%;"><u><font face="宋体">NativeLong</font></u></span></code></a></span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">long</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">platform-dependent (32- or 64-bit integer)</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td></tr>
<tr style="">
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><span lang="EN-US"><a title="class in com.sun.jna" href="mk:@MSITStore:D:%5C0%E7%BC%96%E7%A8%8B%E5%8E%9F%E7%90%86%5C9JNA%5C_API%E5%8F%82%E8%80%83%5CJNA3.09API%E5%8F%82%E8%80%83%E6%89%8B%E5%86%8C%E3%80%90%E8%89%AF%E5%B0%91%E3%80%91.chm::/com/sun/jna/PointerType.html"><code><span style="font-size: 12pt; color: blue; line-height: 115%;"><u><font face="宋体">PointerType</font></u></span></code></a></span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><font face="Calibri"><span lang="EN-US">pointer</span><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></font></font></p></td>
<td style="border: 1pt inset white; padding: 0.75pt; background-color: transparent;">
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font color="#000000"><font size="3"><span lang="EN-US"><font face="Calibri">same as </font></span><code><span style="font-size: 12pt; line-height: 115%;" lang="EN-US"><font face="宋体">Pointer</font></span></code></font><span style="font-size: 12pt; line-height: 115%; font-family: 宋体;" lang="EN-US"><o:p></o:p></span></font></p></td></tr></tbody></table></div>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<h2 style="margin: 10pt 0cm 0pt;"><font size="4"><font color="#4f81bd"><span style="" lang="EN-US"><font face="Cambria">JNA</font></span><span style="font-family: 宋体;">编程过程</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></h2>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">把一个</span><span style="" lang="EN-US"><font face="Calibri">dll/.so</font></span><span style="font-family: 宋体;">文件看做是一个</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">接口。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">Dll</font></span><span style="font-family: 宋体;">是</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">函数的集合、容器，这正和接口的概念吻合。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri"><span style="">&nbsp;&nbsp; </span><span style="">&nbsp;</span></font></span><span style="font-family: 宋体;">我们定义这样一个接口，</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri">public interface TestDll1 extends Library { <o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/**<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">&nbsp;</span>* </font></span><span style="font-family: 宋体;">当前路径是在项目下，而不是</span><span style="" lang="EN-US"><font face="Calibri">bin</font></span><span style="font-family: 宋体;">输出目录下。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="">&nbsp;</span>*/<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>TestDll1 INSTANCE = (TestDll1)Native.loadLibrary("TestDll1", TestDll1.class);<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>public void say(WString value);<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 22pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">如果</span><span style="" lang="EN-US"><font face="Calibri">dll</font></span><span style="font-family: 宋体;">是以</span><span style="" lang="EN-US"><font face="Calibri">stdcall</font></span><span style="font-family: 宋体;">方式输出函数，那么就继承</span><span lang="EN-US"><font face="Calibri">StdCallLibrary</font></span><span style="font-family: 宋体;">。否则就继承默认的</span><span style="" lang="EN-US"><font face="Calibri">Library</font></span><span style="font-family: 宋体;">接口。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 22pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 22pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">接口内部需要一个公共静态常量：</span><span style="" lang="EN-US"><font face="Calibri">instance</font></span><span style="font-family: 宋体;">。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 22pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri">TestDll1 INSTANCE = (TestDll1)Native.loadLibrary("TestDll1", TestDll1.class);<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 22pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">通过这个常量，就可以获得这个接口的实例，从而使用接口的方法。也就是调用外部</span><span style="" lang="EN-US"><font face="Calibri">dll</font></span><span style="font-family: 宋体;">的函数！</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">注意：</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">1</font></span><span style="font-family: 宋体;">，</span><span style="" lang="EN-US"><font face="Calibri">Native.loadLibrary()</font></span><span style="font-family: 宋体;">函数有</span><span style="" lang="EN-US"><font face="Calibri">2</font></span><span style="font-family: 宋体;">个参数：</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp; </span>1</font></span><span style="font-family: 宋体;">，</span><span style="" lang="EN-US"><font face="Calibri">dll</font></span><span style="font-family: 宋体;">或者</span><span style="" lang="EN-US"><font face="Calibri">.so</font></span><span style="font-family: 宋体;">文件的名字，但不带后缀名。这符合</span><span style="" lang="EN-US"><font face="Calibri">JNI</font></span><span style="font-family: 宋体;">的规范，因为带了后缀名就不可以跨操作系统平台了。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">搜索</span><span style="" lang="EN-US"><font face="Calibri">dll</font></span><span style="font-family: 宋体;">的路径是：</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">1</font></span><span style="font-family: 宋体;">）项目的根路径</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">2</font></span><span style="font-family: 宋体;">）操作系统的全局路径、</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">3</font></span><span style="font-family: 宋体;">）</span><span style="" lang="EN-US"><font face="Calibri">path</font></span><span style="font-family: 宋体;">指定的路径。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">2</font></span><span style="font-family: 宋体;">，第二个参数是本接口的</span><span style="" lang="EN-US"><font face="Calibri">Class</font></span><span style="font-family: 宋体;">类型。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">通过这个</span><span style="" lang="EN-US"><font face="Calibri">Class</font></span><span style="font-family: 宋体;">类型，根据指定的</span><span style="" lang="EN-US"><font face="Calibri">dll/.so</font></span><span style="font-family: 宋体;">文件，动态创建接口的实例。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">2</font></span><span style="font-family: 宋体;">，接口中你只需要定义你需要的函数或者公共变量，不需要的可以不定义。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><font size="3"><font color="#000000"><font face="Calibri">public void say(WString value);<o:p></o:p></font></font></font></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">参数和返回值的类型，应该和</span><span style="" lang="EN-US"><font face="Calibri">dll</font></span><span style="font-family: 宋体;">中的</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">函数的类型一致。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">这是</span><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">，甚至所有跨平台调用的难点。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">这里，</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">语言的函数参数是：</span></font></font><span style="font-size: 9pt; color: blue; line-height: 115%; font-family: 新宋体;" lang="EN-US">wchar_t</span><font color="#000000"><span style="font-size: 9pt; line-height: 115%; font-family: 新宋体;" lang="EN-US">*</span><span style="font-size: 9pt; line-height: 115%; font-family: 新宋体;">。<span lang="EN-US"><o:p></o:p></span></span></font></p>
<p class="MsoNormal" style="margin: 0cm 0cm 10pt;"><font color="#000000"><span style="font-size: 12pt; line-height: 115%; font-family: 新宋体;" lang="EN-US">JNA</span><span style="font-size: 12pt; line-height: 115%; font-family: 新宋体;">中对应的<span lang="EN-US">Java</span>类型是<span lang="EN-US">WStirng</span>。</span><span style="font-size: 12pt; line-height: 115%;" lang="EN-US"><o:p></o:p></span></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<h1 style="margin: 24pt 0cm 0pt;"><font size="5"><font color="#365f91"><span style="font-family: 宋体;">所有跨平台、跨语言调用的难点</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></h1>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">有过跨语言、跨平台开发的程序员都知道，跨平台、语言调用的难点，就是不同语言之间数据类型不一致造成的问题。绝大部分跨平台调用的失败，都是这个问题造成的。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">关于这一点，不论何种语言，何种技术方案，都无法解决这个问题。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">这需要程序员的仔细开发和设计。这是程序员的责任。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<h3 style="margin: 10pt 0cm 0pt;"><font size="3"><font color="#4f81bd"><span style="font-family: 宋体;">常见的跨平台调用有：</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></h3>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">1</font></span><span style="font-family: 宋体;">，</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">调用</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">语言编写的</span><span style="" lang="EN-US"><font face="Calibri">dll</font></span><span style="font-family: 宋体;">、</span><span style="" lang="EN-US"><font face="Calibri">.so</font></span><span style="font-family: 宋体;">动态链接库中的函数。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">2</font></span><span style="font-family: 宋体;">，</span><span style="" lang="EN-US"><font face="Calibri">.NET</font></span><span style="font-family: 宋体;">通过</span><span style="" lang="EN-US"><font face="Calibri">P/Invoke</font></span><span style="font-family: 宋体;">调用</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">语言编写的</span><span style="" lang="EN-US"><font face="Calibri">dll</font></span><span style="font-family: 宋体;">、</span><span style="" lang="EN-US"><font face="Calibri">.so</font></span><span style="font-family: 宋体;">动态链接库中的函数。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">3</font></span><span style="font-family: 宋体;">，通过</span><span style="" lang="EN-US"><font face="Calibri">WEBService</font></span><span style="font-family: 宋体;">，在</span><span style="" lang="EN-US"><font face="Calibri">C,C++,Java,.NET</font></span><span style="font-family: 宋体;">等种种语言间调用。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri"><span style="">&nbsp;&nbsp;&nbsp; </span>WebService</font></span><span style="font-family: 宋体;">传递的是</span><span style="" lang="EN-US"><font face="Calibri">xml</font></span><span style="font-family: 宋体;">格式的数据。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">即使是强大的</span><span style="" lang="EN-US"><font face="Calibri">P/Invoke</font></span><span style="font-family: 宋体;">或者</span><span style="" lang="EN-US"><font face="Calibri">WebService</font></span><span style="font-family: 宋体;">，在遇到复杂的数据类型和大数据量的传递时，还是会碰到很大的困难。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<h3 style="margin: 10pt 0cm 0pt;"><font size="3"><font color="#4f81bd"><span style="font-family: 宋体;">因为，一种语言的复杂的数据类型，很难用另一种语言来表示。这就是跨平台调用问题的本质。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></h3>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">如，</span><span style="" lang="EN-US"><font face="Calibri">WEBService</font></span><span style="font-family: 宋体;">调用中，很多语言，如</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">，</span><span style="" lang="EN-US"><font face="Calibri">.NET</font></span><span style="font-family: 宋体;">都有自动实现的</span><span style="" lang="EN-US"><font face="Calibri">Java/.NET</font></span><span style="font-family: 宋体;">类型和</span><span style="" lang="EN-US"><font face="Calibri">XML</font></span><span style="font-family: 宋体;">类型之间的映射的类库或者工具。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">但是，在现实的编程环境中，如果类型非常复杂，那么这些自动转换工具常常力不从心。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">要么</span><span style="" lang="EN-US"><font face="Calibri">Object-XML</font></span><span style="font-family: 宋体;">映射错误。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">要么映射掉大量的内存。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">因此，我个人对这些</span><span style="" lang="EN-US"><font face="Calibri">Object-XML</font></span><span style="font-family: 宋体;">映射框架相当不感冒。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">我现在使用</span><span style="" lang="EN-US"><font face="Calibri">WEBService</font></span><span style="font-family: 宋体;">，都是直接手工使用</span><span style="" lang="EN-US"><font face="Calibri">xml</font></span><span style="font-family: 宋体;">处理工具提取</span><span style="" lang="EN-US"><font face="Calibri">xml</font></span><span style="font-family: 宋体;">中的数据构建对象。或者反过来，手工根据</span><span style="" lang="EN-US"><font face="Calibri">Object</font></span><span style="font-family: 宋体;">中的属性值构建</span><span style="" lang="EN-US"><font face="Calibri">xml</font></span><span style="font-family: 宋体;">数据。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">和</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">语言之间的调用问题，也是如此。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">要调用</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">语言的函数，那么就必须严格按照</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">语言要求的内存数量提供</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">格式的数据。要用</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">的数据类型完美模拟</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">语言的数据类型。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">已经提供了大量的类型匹配</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">语言的数据类型。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<h3 style="margin: 10pt 0cm 0pt;"><font size="3"><font color="#4f81bd"><span style="font-family: 宋体;">跨平台、跨语言调用的第一原则：就是尽量使用基本、简单的数据类型，尽量少跨语言、平台传递数据！</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></h3>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">只有你才能拯救你自己。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">如果在你的程序中，有复杂的数据类型和庞大的跨平台数据传递。那么你必须另外写一些</span><span style="" lang="EN-US"><font face="Calibri">Façade</font></span><span style="font-family: 宋体;">接口，把需要传递的数据类型简化，把需要传递的数据量简化。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">否则，不论是实现的难度还是程序的性能都很难提高。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><span style="" lang="EN-US"><o:p><font size="3" color="#000000" face="Calibri">&nbsp;</font></o:p></span></p>
<h1 style="margin: 24pt 0cm 0pt;"><font size="5"><font color="#365f91"><span style="" lang="EN-US"><font face="Cambria">JNI</font></span><span style="font-family: 宋体;">还是不能废</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></h1>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">我们已经见识了</span><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">的强大。</span><span style="" lang="EN-US"><font face="Calibri">JNI</font></span><span style="font-family: 宋体;">和它相比是多么的简陋啊！</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">但是，有些需求还是必须求助于</span><span style="" lang="EN-US"><font face="Calibri">JNI</font></span><span style="font-family: 宋体;">。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">是建立在</span><span style="" lang="EN-US"><font face="Calibri">JNI</font></span><span style="font-family: 宋体;">技术基础之上的一个框架。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">使用</span><span style="" lang="EN-US"><font face="Calibri">JNI</font></span><span style="font-family: 宋体;">技术，不仅可以实现</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">访问</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">函数，也可以实现</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">语言调用</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">代码。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="font-family: 宋体;">而</span><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">只能实现</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">访问</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">函数，作为一个</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">框架，自然不能实现</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">语言调用</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">代码。此时，你还是需要使用</span><span style="" lang="EN-US"><font face="Calibri">JNI</font></span><span style="font-family: 宋体;">技术。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p>
<p class="MsoNoSpacing" style="margin: 0cm 0cm 0pt;"><font size="3"><font color="#000000"><span style="" lang="EN-US"><font face="Calibri">JNI</font></span><span style="font-family: 宋体;">是</span><span style="" lang="EN-US"><font face="Calibri">JNA</font></span><span style="font-family: 宋体;">的基础。是</span><span style="" lang="EN-US"><font face="Calibri">Java</font></span><span style="font-family: 宋体;">和</span><span style="" lang="EN-US"><font face="Calibri">C</font></span><span style="font-family: 宋体;">互操作的技术基础。</span><span style="" lang="EN-US"><o:p></o:p></span></font></font></p><p class="right articalinfo">发表于 @ <a href="http://blog.csdn.net/sl2718281828/archive/2008/12/23/3591857.aspx" title="permalink">2008年12月23日 22:59:00</a>|<a href="http://blog.csdn.net/sl2718281828/archive/2008/12/23/3591857.aspx#FeedBack" title="评论">评论(<span id="FeedbackCount_3591857">0</span><script type="text/javascript">AddFeedbackCountStack("3591857")</script>)</a>|<a href="http://writeblog.csdn.net/PostEdit.aspx?entryId=3591857" title="编辑">编辑</a>|<cite class="fav_csdnstylebykimi"><a href="javascript:d=document;t=d.selection?(d.selection.type!='None'?d.selection.createRange().text:''):(d.getSelection?d.getSelection():'');void(saveit=window.open('http://wz.csdn.net/storeit.aspx?t='+escape(d.title)+'&amp;u='+escape(d.location.href)+'&amp;c='+escape(t),'saveit','scrollbars=no,width=590,height=300,left=75,top=20,status=no,resizable=yes'));saveit.focus();" class="fav_csdnstylebykimi" title="收藏到我的网摘中，并分享给我的朋友">收藏</a></cite></p>
    <span id="Post.ascx_ViewPost_PreviousAndNextEntriesDown"><h3>&nbsp;|&nbsp;<a href="http://blog.csdn.net/sl2718281828/archive/2008/09/05/2883652.aspx">旧一篇:&nbsp;NetBeans 6.5 Milestone 2 中DB Explorer将要提供的特性</a></h3></span>
</div>

        <div id="Post.ascx_TagAd_palTagAd">
	
    <div class="tagadfornews" id="csdn_tag_adstyle">
    </div>

</div>

    </div>
    <div class="commentslist">
        <span id="Anthem_Post.ascx_Comments_ltlComments__"><span id="Post.ascx_Comments_ltlComments"><div id="commentslist"><h3>评论：没有评论。</h3></div></span></span>

    </div>
    <div class="spacecommment">
        <div id="Anthem_Post.ascx_PostComment_CommentUpdatePanel__"><div id="Post.ascx_PostComment_CommentUpdatePanel">
	
    <fieldset>
        <legend>发表评论</legend>
        
        <div id="Post.ascx_PostComment_CommentPanel">
		
        <ul>
            <li>姓&nbsp;&nbsp;&nbsp;名：<input name="Post.ascx:PostComment:tbName" value="dukula" maxlength="32" id="Post.ascx_PostComment_tbName" disabled="disabled" size="40" type="text"><span controltovalidate="Post.ascx_PostComment_tbName" errormessage="请输入名字" id="Post.ascx_PostComment_RequiredFieldValidator2" evaluationfunction="RequiredFieldValidatorEvaluateIsValid" initialvalue="" style="color: Red; visibility: hidden;">请输入名字</span></li>
            <li>主&nbsp;&nbsp;&nbsp;页：<input name="Post.ascx:PostComment:tbUrl" maxlength="256" id="Post.ascx_PostComment_tbUrl" size="40" type="text"></li>
            <li>
                <div id="Post.ascx_PostComment_AntiBotImageRegion">
			
                    校验码：
                    <input name="Post.ascx:PostComment:tbAntiBotImage" id="Post.ascx_PostComment_tbAntiBotImage" style="width: 75px;" type="text">
                    <span display="Dynamic" id="Post.ascx_PostComment_valAntiBotImage" evaluationfunction="CustomValidatorEvaluateIsValid" style="color: Red; display: none;">检验码无效!</span>
                    <span id="Anthem_Post.ascx_PostComment_imgAntiBotImage__"><img id="Post.ascx_PostComment_imgAntiBotImage" src="JNA%E4%BB%8B%E7%BB%8D_files/AntiBotImage.htm" alt="" align="absmiddle" border="0"></span>
                    <span id="Anthem_Post.ascx_PostComment_lbCreateAntiBotImage__"><a onclick="javascript:Anthem_FireCallBackEvent(this,event,'Post.ascx:PostComment:lbCreateAntiBotImage','',false,'','','',true,null,null,null,true,true);return false;" id="Post.ascx_PostComment_lbCreateAntiBotImage" href="javascript:__doPostBack('Post.ascx$PostComment$lbCreateAntiBotImage','')">看不清,换一张</a></span>
		</div>
            </li>
        </ul>
        <span controltovalidate="Post.ascx_PostComment_tbComment" errormessage="请输入评论" id="Post.ascx_PostComment_RequiredFieldValidator3" evaluationfunction="RequiredFieldValidatorEvaluateIsValid" initialvalue="" style="color: Red; visibility: hidden;">请输入评论</span><br>
        <textarea name="Post.ascx:PostComment:tbComment" rows="10" cols="50" id="Post.ascx_PostComment_tbComment"></textarea><br>
        <span id="Anthem_Post.ascx_PostComment_btnSubmit__"><input name="Post.ascx:PostComment:btnSubmit" value="提交" onclick="javascript:Anthem_FireCallBackEvent(this,event,'Post.ascx:PostComment:btnSubmit','',true,'','','正在处理...',false,null,null,null,true,true);return false;WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;Post.ascx:PostComment:btnSubmit&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" language="javascript" id="Post.ascx_PostComment_btnSubmit" type="submit"></span>
        <br>
        <span id="Post.ascx_PostComment_Message" style="color: Red;"></span> 
        
	</div>
    </fieldset>

</div></div>

    </div>

    <script type="text/javascript">
    LoadFeedbackCount();//加载评论
    document.write("<img src='http://counter.csdn.net/pv.aspx?id=24' border=0 width=0 height=0>");// 计数器
    
    </script><img src="JNA%E4%BB%8B%E7%BB%8D_files/pv_002.txt" width="0" border="0" height="0">
    
    
    

</div>
 
                
        </div>
    </div>
    
    <div id="pubfooter">
        
<dl>
    <dt></dt>
    <dd>
        Csdn Blog version 3.1a</dd>
    <dd>
        Copyright ©
        sl2718281828
    </dd>
</dl>

    </div>
</div>

        
<script type="text/javascript">
<!--
var Page_Validators =  new Array(document.getElementById("Post.ascx_PostComment_RequiredFieldValidator2"), document.getElementById("Post.ascx_PostComment_valAntiBotImage"), document.getElementById("Post.ascx_PostComment_RequiredFieldValidator3"));
// -->
</script>


<script type="text/javascript">
<!--

var Page_ValidationActive = false;
if (typeof(ValidatorOnLoad) == "function") {
    ValidatorOnLoad();
}

function ValidatorOnSubmit() {
    if (Page_ValidationActive) {
        return ValidatorCommonOnSubmit();
    }
    else {
        return true;
    }
}
        // -->
</script>
</form>

        <script type="text/javascript" src="JNA%E4%BB%8B%E7%BB%8D_files/counter.js"></script><img src="JNA%E4%BB%8B%E7%BB%8D_files/visitlog.htm" alt="" width="1" border="0" height="1"><iframe id="myframe" name="myframe" border="0" src="JNA%E4%BB%8B%E7%BB%8D_files/dd333.htm" scrolling="no" width="0" frameborder="no" height="0"></iframe>
<!-- *** Vdoing Code *** -->
<script type="text/javascript" charset="UTF-8" src="JNA%E4%BB%8B%E7%BB%8D_files/34089.js"></script><a href="http://www.vdoing.com/" target="_blank" title="Vdoing Stats No.34089
 www.vdoing.com"><img src="JNA%E4%BB%8B%E7%BB%8D_files/vd02.gif" align="absmiddle" border="0"></a>
<noscript><a href="http://www.vdoing.com" title="Vdoing StatsX
No.34089"><img src="http://simg.vdoing.com/m/34089/x01.gif?noscript"
border="0"></a></noscript>
<!-- *** End of Vdoing Code *** -->

    </div>
<img style="display: none;" alt="" src="JNA%E4%BB%8B%E7%BB%8D_files/pv.txt"></body></html>